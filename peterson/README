g++ -pthread -fsanitize=thread -Wall peterson.cpp
./a.out

Note: clang -pthread peterson.cpp compiles, but for some reason fails!
